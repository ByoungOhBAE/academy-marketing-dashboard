<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Clawd Marketing Dashboard</title>
    <style>
        /* [Layout] */
        body { margin: 0; display: flex; height: 100vh; font-family: sans-serif; background: #f5f7fa; color: #333; }
        
        /* [Sidebar] */
        .sidebar { width: 280px; background: white; border-right: 1px solid #e1e4e8; display: flex; flex-direction: column; }
        .sidebar-header { padding: 20px; font-weight: bold; font-size: 18px; border-bottom: 1px solid #eee; color: #2c3e50; }
        .nav-list { flex: 1; overflow-y: auto; padding: 10px; }
        .nav-item { padding: 12px 15px; margin-bottom: 5px; border-radius: 6px; cursor: pointer; transition: 0.2s; font-size: 14px; color: #555; }
        .nav-item:hover { background: #f0f4f8; color: #000; }
        .nav-item.active { background: #3498db; color: white; font-weight: bold; }

        /* [Main] */
        .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        
        /* [Toolbar] */
        .toolbar { padding: 15px 30px; background: white; border-bottom: 1px solid #eee; display: flex; gap: 20px; align-items: center; justify-content: space-between; }
        .mode-tabs button { padding: 8px 20px; border: 1px solid #ddd; background: white; cursor: pointer; border-radius: 20px; font-weight: bold; color: #555; margin-right: 5px; }
        .mode-tabs button.active.blog { background: #03c75a; color: white; border-color: #03c75a; }
        .mode-tabs button.active.insta { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); color: white; border: none; }
        
        .option-tabs button { padding: 6px 12px; border: 1px solid #ddd; background: #f9f9f9; cursor: pointer; border-radius: 4px; font-size: 13px; }
        .option-tabs button.active { background: #333; color: white; border-color: #333; }

        /* [Content Area] */
        .content-area { flex: 1; overflow-y: auto; padding: 40px; display: flex; justify-content: center; }
        
        /* [Blog Style] */
        .blog-card { width: 100%; max-width: 700px; background: white; border: 1px solid #ddd; padding: 40px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
        .blog-card h3 { color: #03c75a; border-bottom: 2px solid #03c75a; padding-bottom: 10px; margin-top: 40px; }
        .blog-card img { max-width: 100%; border-radius: 8px; margin: 20px 0; }
        
        /* [Insta Style] */
        .insta-card { width: 375px; background: white; border: 1px solid #dbdbdb; border-radius: 3px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .insta-header { padding: 14px; display: flex; align-items: center; border-bottom: 1px solid #efefef; gap: 10px; font-weight: bold; font-size: 14px; }
        .insta-img { width: 100%; height: 375px; object-fit: cover; background: #fafafa; }
        .insta-body { padding: 15px; font-size: 14px; line-height: 1.5; white-space: pre-line; }
    </style>
</head>
<body>

    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <div class="sidebar-header">ğŸ“‚ ì‘ì—… ëª©ë¡</div>
        <div class="nav-list" id="navList">
            <div style="padding:10px; color:#999;">ë¡œë”© ì¤‘...</div>
        </div>
    </div>

    <!-- ë©”ì¸ -->
    <div class="main">
        <div class="toolbar">
            <div class="mode-tabs">
                <button class="active blog" onclick="setMode('blog')">ë„¤ì´ë²„ ë¸”ë¡œê·¸</button>
                <button class="insta" onclick="setMode('insta')">ì¸ìŠ¤íƒ€ê·¸ë¨</button>
            </div>
            <div class="option-tabs">
                <button class="active" onclick="setOption('A')">A. ì „ë¬¸ê°€</button>
                <button onclick="setOption('B')">B. ê°ì„±</button>
                <button onclick="setOption('C')">C. í™ë³´</button>
            </div>
        </div>

        <div class="content-area" id="contentArea">
            <!-- ë‚´ìš©ì´ ì—¬ê¸°ì— ë‚˜ì˜´ -->
        </div>
    </div>

    <script>
        let globalData = { blog: [], insta: [] }; // ì´ˆê¸°í™” ë³€ê²½ (ê°ì²´)
        let currentIndex = 0;
        let currentMode = 'blog';
        let currentOption = 'A';

        // 1. ë°ì´í„° ë¡œë“œ
        fetch('/data.json?t=' + Date.now())
            .then(res => res.json())
            .then(data => {
                globalData = data; // ê°ì²´ ê·¸ëŒ€ë¡œ ì €ì¥
                renderSidebar();
                renderContent();
            })
            .catch(err => {
                console.error(err);
                document.getElementById('navList').innerHTML = '<div style="color:red; padding:10px;">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</div>';
            });

        // 2. ì‚¬ì´ë“œë°” ê·¸ë¦¬ê¸° (ëª¨ë“œì— ë”°ë¼ ë‹¤ë¥´ê²Œ)
        function renderSidebar() {
            const list = document.getElementById('navList');
            list.innerHTML = '';
            
            // í˜„ì¬ ëª¨ë“œì— ë§ëŠ” ë°°ì—´ ì„ íƒ
            const currentList = globalData[currentMode] || [];
            
            if (currentList.length === 0) {
                list.innerHTML = '<div style="padding:15px; color:#999;">ì‘ì—… ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            currentList.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = `nav-item ${index === currentIndex ? 'active' : ''}`;
                div.innerText = item.id;
                div.onclick = () => {
                    currentIndex = index;
                    renderSidebar(); // active ê°±ì‹ 
                    renderContent();
                };
                list.appendChild(div);
            });
        }

        // 3. ë‚´ìš© ê·¸ë¦¬ê¸°
        function renderContent() {
            const container = document.getElementById('contentArea');
            container.innerHTML = '';

            const currentList = globalData[currentMode] || [];
            const item = currentList[currentIndex];
            
            if (!item) return;

            // ë°ì´í„° êµ¬ì¡°: item.content.blog.A -> ì´ì œëŠ” item.content.A (ì´ë¯¸ ë¶„ë¦¬ë¨)
            // í•˜ì§€ë§Œ ì•„ê¹Œ JSON êµ¬ì¡°ë¥¼ ë³´ë‹ˆ content.insta.A ì²˜ëŸ¼ ì¤‘ì²©ë˜ì–´ ìˆì„ ìˆ˜ë„ ìˆìŒ.
            // ì•ˆì „í•˜ê²Œ ì²˜ë¦¬:
            let posts = [];
            
            if (item.content[currentMode]) {
                 posts = item.content[currentMode][currentOption]; // ì¤‘ì²©ëœ ê²½ìš° (content.blog.A)
            } else if (item.content[currentOption]) {
                 posts = item.content[currentOption]; // ì§ì ‘ ìˆëŠ” ê²½ìš° (content.A)
            } else {
                 // ì˜ˆì™¸: ì¸ìŠ¤íƒ€ ëª¨ë“œì¸ë° contentì— blogë§Œ ìˆê±°ë‚˜ ê·¸ ë°˜ëŒ€
                 container.innerHTML = '<div style="color:#999; margin-top:50px;">í•´ë‹¹í•˜ëŠ” ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                 return;
            }

            if (!posts || posts.length === 0) {
                container.innerHTML = '<div style="color:#999; margin-top:50px;">ì„ íƒí•œ ì˜µì…˜ì˜ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            const post = posts[0]; // ì²«ë²ˆì§¸ ê¸€ë§Œ í‘œì‹œ

            if (currentMode === 'blog') {
                container.innerHTML = `
                    <div class="blog-card">
                        <h1 style="margin-bottom:10px;">${post.title || 'ì œëª© ì—†ìŒ'}</h1>
                        <div style="font-size:13px; color:#888; margin-bottom:30px;">${item.date} Â· ì „ì²´ê³µê°œ</div>
                        <div style="line-height:1.8;">${post.content || ''}</div>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="insta-card">
                        <div class="insta-header">
                            <div style="width:30px; height:30px; background:#eee; border-radius:50%;"></div>
                            leesujin0718
                        </div>
                        <img src="${post.image || ''}" class="insta-img">
                        <div class="insta-body">
                            <b>leesujin0718</b> ${post.caption ? post.caption.replace(/\n/g, '<br>') : ''}
                        </div>
                    </div>
                `;
            }
        }

        // ìœ í‹¸ë¦¬í‹°: ëª¨ë“œ ë³€ê²½
        function setMode(mode) {
            currentMode = mode;
            currentIndex = 0; // ëª¨ë“œ ë°”ë€Œë©´ ì²« ë²ˆì§¸ í•­ëª©ìœ¼ë¡œ ë¦¬ì…‹
            
            document.querySelectorAll('.mode-tabs button').forEach(b => {
                b.classList.toggle('active', b.classList.contains(mode));
            });
            
            renderSidebar(); // ì‚¬ì´ë“œë°”ë„ ë‹¤ì‹œ ê·¸ë ¤ì•¼ í•¨ (ëª©ë¡ì´ ë‹¤ë¥´ë‹ˆê¹Œ)
            renderContent();
        }

        // ìœ í‹¸ë¦¬í‹°: ì˜µì…˜ ë³€ê²½
        function setOption(opt) {
            currentOption = opt;
            document.querySelectorAll('.option-tabs button').forEach(b => {
                b.classList.toggle('active', b.innerText.includes(opt));
            });
            renderContent();
        }
    </script>

</body>
</html>
